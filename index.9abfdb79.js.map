{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,2CAAMC,EAAgBC,SAASC,eAAe,eACxCC,EAAYF,SAASC,eAAe,gBACpCE,EAAaH,SAASC,eAAe,iBACrCG,EAAUJ,SAASC,eAAe,cAClCI,EAAWL,SAASC,eAAe,eACnCK,EAAcN,SAASC,eAAe,kBACtCM,EAAcP,SAASQ,cAAc,yBACrCC,EAAiBT,SAASQ,cAAc,iBACxCE,EAAaV,SAASQ,cAAc,uBAEtCG,EAAc,EAQZC,G,EAAcC,EAAAhB,EAAA,CAAAgB,EAAAC,GAAAC,MAAA,SAAAC,EAAMC,G,IAElBC,E,kEADNnB,EAAcoB,UAAY,GACpBD,EAAgBD,EAAMG,QACzBC,KAAI,SAAAC,G,OAAQ,EAAAC,EAAAC,SAAeF,E,IAC3BG,KAAK,IAER1B,EAAcoB,UAAYD,E,oDANFD,G,iCASpBS,EAAQ,W,MAAGb,EAAAhB,EAAA,CAAAgB,EAAAC,GAAAC,MAAA,SAAAC,I,IACTW,EASEC,EACAX,E,yEAVFU,EAAQ,IAAIE,gBAAgB,CAChCC,QAASvB,EAAYwB,MAAMC,OAC3BC,KAAMtB,EACNuB,MAAO,EACPC,SAAmC,aAAzB1B,EAAesB,MAAuBtB,EAAesB,MAAQ,GACvEK,KAA2B,YAArB1B,EAAWqB,MAAsBrB,EAAWqB,MAAQ,K,kBAInCM,MA1Bf,mDA0B2BV,EAAMW,Y,cAAnCV,EAAQW,EAAAC,K,SACMZ,EAASa,O,OAAvBxB,EAAKsB,EAAAC,KACc,cAArB9B,EAAWqB,MACbd,EAAMG,QAAQgB,MAAK,SAACM,EAAGC,G,OAAMD,EAAEE,KAAKC,cAAcF,EAAEC,K,IACtB,eAArBlC,EAAWqB,MACpBd,EAAMG,QAAQgB,MAAK,SAACM,EAAGC,G,OAAMA,EAAEC,KAAKC,cAAcH,EAAEE,K,IACtB,gBAArBlC,EAAWqB,MACpBd,EAAMG,QAAQgB,MAAK,SAACM,EAAGC,G,OAAMD,EAAEI,MAAQH,EAAEG,K,IACX,iBAArBpC,EAAWqB,MACpBd,EAAMG,QAAQgB,MAAK,SAACM,EAAGC,G,OAAMA,EAAEG,MAAQJ,EAAEI,K,IACX,qBAArBpC,EAAWqB,MACpBd,EAAMG,QAAQgB,MAAK,SAACM,EAAGC,G,OAAMD,EAAEK,WAAaJ,EAAEI,U,IAChB,sBAArBrC,EAAWqB,OACpBd,EAAMG,QAAQgB,MAAK,SAACM,EAAGC,G,OAAMA,EAAEI,WAAaL,EAAEK,U,IAGhDnC,EAAYK,GACZ+B,EAAiBrC,EAAaM,EAAMgC,Y,kDAEpCC,QAAQC,MAAKZ,EAAAa,IACbrD,EAAcoB,UAAY,4B,4GA9BhB,GAiCR6B,EAAmB,SAACK,EAAaC,GACrCpD,EAAUiB,UAAY,GACtB,IAAK,IAAIoC,EAAI,EAAGA,GAAKD,EAAOC,IAC1B,GACQ,IAANA,GACAA,IAAMD,GACLC,GAAKF,EAAc,GAAKE,GAAKF,EAAc,EAC5C,CACA,IAAMG,EAASxD,SAASyD,cAAc,UACtCD,EAAOE,UAAUC,IAAI,cACrBH,EAAOI,QAAQ3B,KAAOsB,EACtBC,EAAOK,YAAcN,EACjBA,IAAMF,IACRG,EAAOM,UAAW,EAClBN,EAAOO,MAAMC,WAAa,UAC1BR,EAAOO,MAAME,MAAQ,WAEnBV,IAAMD,IAAOE,EAAOK,YAAc,OACtC3D,EAAUgE,YAAYV,E,CAG1BrD,EAAW2D,SAAWT,GAAe,EACrCjD,EAAQ0D,SAA2B,IAAhBT,EACnBhD,EAASyD,SAAWT,IAAgBC,EACpChD,EAAYwD,SAAWT,GAAeC,EAAQ,C,EAGhDpD,EAAUiE,iBAAiB,SAAS,SAAAC,GAC9BA,EAAEC,OAAOX,UAAUY,SAAS,gBAC9B3D,GAAeyD,EAAEC,OAAOT,QAAQ3B,KAChCP,I,IAIJ,CAACvB,EAAYC,EAASC,EAAUC,GAAaiE,SAAQ,SAAAC,GACnDA,EAAIL,iBAAiB,SAAS,WAC5BxD,GACE6D,IAAQrE,GAAa,EAAKqE,IAAQpE,GAAU,EAAKoE,IAAQnE,EAAW,EAAI,EAC1EqB,G,OAIJ,CAACnB,EAAaE,EAAgBC,GAAY6D,SAAQ,SAAAE,GAChDA,EAAMN,iBAAiB,SAAS,WAC9BxD,EAAc,EACde,G,OAGJhB,EAAWyD,iBAAiB,UAAU,WACpCxD,EAAc,EACde,G,IAGF,IAAMgD,EAAc,W,MAAG7D,EAAAhB,EAAA,CAAAgB,EAAAC,GAAAC,MAAA,SAAAC,I,IAEbY,EACA+C,E,2FADiBtC,MAtGzB,8D,cAsGQT,EAAQW,EAAAC,K,SACWZ,EAASa,O,OAA5BkC,EAAUpC,EAAAC,KAChB/B,EAAeU,UACb,6CACAwD,EAAWtD,KAAI,SAAAuD,G,MAAO,kBAA0BC,OAARD,EAAI,MAAQC,OAAJD,EAAI,Y,IAAYnD,KAAK,I,kDAEvEyB,QAAQC,MAAM,6BAA4BZ,EAAAa,I,4GAR1B,GAYpBsB,IACAhD,G","sources":["src/js/filter.js"],"sourcesContent":["const cardContainer = document.getElementById('js-cardList');\nconst btnsBlock = document.getElementById('js-btnsBlock');\nconst leftDblBtn = document.getElementById('js-leftDblBtn');\nconst leftBtn = document.getElementById('js-leftBtn');\nconst rightBtn = document.getElementById('js-rightBtn');\nconst rightDblBtn = document.getElementById('js-rightDblBtn');\nconst searchInput = document.querySelector('.filter__search_input');\nconst categorySelect = document.querySelector('.filter__sort');\nconst sortSelect = document.querySelector('.filter__catigories');\n\nlet currentPage = 1;\nconst URL = 'https://food-boutique.b.goit.study/api/products?';\nconst CATEGORY_URL =\n  'https://food-boutique.b.goit.study/api/products/categories';\n\nimport Handlebars from 'handlebars';\nimport templateSource from '../templates/card.hbs';\n\nconst renderCards = async posts => {\n  cardContainer.innerHTML = '';\n  const renderedPosts = posts.results\n    .map(post => templateSource(post))\n    .join('');\n\n  cardContainer.innerHTML = renderedPosts;\n};\n\nconst getCards = async () => {\n  const param = new URLSearchParams({\n    keyword: searchInput.value.trim(),\n    page: currentPage,\n    limit: 9,\n    category: categorySelect.value !== 'show-all' ? categorySelect.value : '',\n    sort: sortSelect.value !== 'showAll' ? sortSelect.value : '',\n  });\n\n  try {\n    const response = await fetch(URL + param.toString());\n    const posts = await response.json();\n    if (sortSelect.value === 'byABC_Asc') {\n      posts.results.sort((a, b) => a.name.localeCompare(b.name));\n    } else if (sortSelect.value === 'byABC_Desc') {\n      posts.results.sort((a, b) => b.name.localeCompare(a.name));\n    } else if (sortSelect.value === 'byPrice_Asc') {\n      posts.results.sort((a, b) => a.price - b.price);\n    } else if (sortSelect.value === 'byPrice_Desc') {\n      posts.results.sort((a, b) => b.price - a.price);\n    } else if (sortSelect.value === 'byPopularity_Asc') {\n      posts.results.sort((a, b) => a.popularity - b.popularity);\n    } else if (sortSelect.value === 'byPopularity_Desc') {\n      posts.results.sort((a, b) => b.popularity - a.popularity);\n    }\n\n    renderCards(posts);\n    renderPagination(currentPage, posts.totalPages);\n  } catch (err) {\n    console.error(err);\n    cardContainer.innerHTML = '<p>Постів не знайдено</p>';\n  }\n};\nconst renderPagination = (currentPage, total) => {\n  btnsBlock.innerHTML = '';\n  for (let i = 1; i <= total; i++) {\n    if (\n      i === 1 ||\n      i === total ||\n      (i >= currentPage - 1 && i <= currentPage + 3)\n    ) {\n      const button = document.createElement('button');\n      button.classList.add('cards__btn');\n      button.dataset.page = i;\n      button.textContent = i;\n      if (i === currentPage) {\n        button.disabled = true;\n        button.style.background = '#6d8434';\n        button.style.color = '#e8e8e2';\n      }\n      if (i === total) button.textContent = '...';\n      btnsBlock.appendChild(button);\n    }\n  }\n  leftDblBtn.disabled = currentPage <= 2;\n  leftBtn.disabled = currentPage === 1;\n  rightBtn.disabled = currentPage === total;\n  rightDblBtn.disabled = currentPage >= total - 1;\n};\n\nbtnsBlock.addEventListener('click', e => {\n  if (e.target.classList.contains('cards__btn')) {\n    currentPage = +e.target.dataset.page;\n    getCards();\n  }\n});\n\n[leftDblBtn, leftBtn, rightBtn, rightDblBtn].forEach(btn => {\n  btn.addEventListener('click', () => {\n    currentPage +=\n      btn === leftDblBtn ? -2 : btn === leftBtn ? -1 : btn === rightBtn ? 1 : 2;\n    getCards();\n  });\n});\n\n[searchInput, categorySelect, sortSelect].forEach(input => {\n  input.addEventListener('input', () => {\n    currentPage = 1;\n    getCards();\n  });\n});\nsortSelect.addEventListener('change', () => {\n  currentPage = 1;\n  getCards();\n});\n\nconst loadCategories = async () => {\n  try {\n    const response = await fetch(CATEGORY_URL);\n    const categories = await response.json();\n    categorySelect.innerHTML =\n      '<option value=\"show-all\">Show all</option>' +\n      categories.map(cat => `<option value=\"${cat}\">${cat}</option>`).join('');\n  } catch (err) {\n    console.error('Ошибка загрузки категорий:', err);\n  }\n};\n\nloadCategories();\ngetCards();\n"],"names":["$bpxeT","parcelRequire","$6142fea1849c7fbd$var$cardContainer","document","getElementById","$6142fea1849c7fbd$var$btnsBlock","$6142fea1849c7fbd$var$leftDblBtn","$6142fea1849c7fbd$var$leftBtn","$6142fea1849c7fbd$var$rightBtn","$6142fea1849c7fbd$var$rightDblBtn","$6142fea1849c7fbd$var$searchInput","querySelector","$6142fea1849c7fbd$var$categorySelect","$6142fea1849c7fbd$var$sortSelect","$6142fea1849c7fbd$var$currentPage","$6142fea1849c7fbd$var$renderCards","$parcel$interopDefault","$2TvXO","mark","_callee","posts","renderedPosts","innerHTML","results","map","post","$fk3mF","default","join","$6142fea1849c7fbd$var$getCards","param","response","URLSearchParams","keyword","value","trim","page","limit","category","sort","fetch","toString","_ctx","sent","json","a","b","name","localeCompare","price","popularity","$6142fea1849c7fbd$var$renderPagination","totalPages","console","error","t0","currentPage1","total","i","button","createElement","classList","add","dataset","textContent","disabled","style","background","color","appendChild","addEventListener","e","target","contains","forEach","btn","input","$6142fea1849c7fbd$var$loadCategories","categories","cat","concat"],"version":3,"file":"index.9abfdb79.js.map"}